# 🔒 Focus Timer - 강화된 집중 모드 타이머

YouTube 차단과 알고리즘 문제 기반 종료 방지 시스템을 결합한 생산성 향상 도구입니다.

## ✨ 주요 기능

### 🚫 YouTube 완전 차단
- YouTube 핵심 도메인 및 API 서비스 차단
- 브라우저 캐시 자동 초기화
- DNS 캐시 완전 초기화

### 🔐 알고리즘 문제 기반 종료 방지
- 지정된 시간대에는 프로그램 종료 불가
- 종료하려면 난이도별 알고리즘 문제 해결 필요
- 실패 시 난이도 자동 증가 (1~5단계)

### 🔄 브라우저 강제 재시작
- 집중 모드 시작 시 모든 브라우저 강제 재시작
- 세션 보존 재시작으로 작업 환경 유지

### 🚀 자동 시작 시스템
- 시스템 부팅 시 자동 실행
- 백그라운드에서 지속적인 모니터링

## 🎯 모드별 기능

### 1. 시간대 차단 모드 (기본)
```
매일 지정한 시간에 YouTube 차단
- 예: 오전 9시 ~ 오후 6시
- 선택적으로 종료 방지 모드 활성화 가능
```

### 2. 타이머 차단 모드
```
지금부터 N시간 동안 YouTube 차단
- 예: 2.5시간 동안 차단
- 동적 체크 간격으로 효율적인 모니터링
```

### 3. 집중 모드 (강화)
```
완전한 종료 방지 + 브라우저 강제 재시작
- 지정된 시간대에 절대 종료 불가
- 알고리즘 문제 해결 시에만 종료 가능
- 브라우저 강제 재시작으로 차단 확실성 보장
```

## 🧮 알고리즘 문제 난이도

### 난이도 1: 기본 사칙연산
- 2자리 수 덧셈, 뺄셈, 곱셈
- 예: `45 + 67 = ?`

### 난이도 2: 3자리 수 연산
- 3자리 수와 2자리 수 연산
- 예: `234 * 56 = ?`

### 난이도 3: 복합 연산
- 괄호가 포함된 복합 계산
- 예: `(25 + 15) × 8 = ?`

### 난이도 4: 피보나치 수열
- 피보나치 수열의 n번째 수 계산
- 예: `피보나치 수열의 7번째 수는?`

### 난이도 5: 정렬 알고리즘
- 숫자 배열 정렬 후 중간값 찾기
- 예: `[23, 45, 12, 67, 34] 정렬 후 중간값은?`

## 🚀 설치 및 사용법

### 1. 기본 실행
```bash
# 관리자 권한으로 실행
sudo python3 focus_timer.py
```

### 📅 시간 입력 형식
- **정수**: `9` (9시 00분)
- **시간:분**: `9:30` (9시 30분)
- **소수점**: `9.5` (9시 30분, 0.5시간 = 30분)

### 2. 자동 시작 설치
```bash
# 실행 권한 부여
chmod +x install_focus_timer.sh

# 자동 시작 설치
./install_focus_timer.sh
```

### 3. 자동 시작 제거
```bash
# 실행 권한 부여
chmod +x uninstall_focus_timer.sh

# 자동 시작 제거
./uninstall_focus_timer.sh
```

## 📋 사용 예시

### 집중 모드 설정 (추천)
```bash
sudo python3 focus_timer.py

# 모드 3 선택
# 집중 시작 시간: 9 또는 9:30 또는 9.5
# 집중 종료 시간: 18 또는 18:30 또는 18.5
```

### 시간대 차단 + 종료 방지
```bash
sudo python3 focus_timer.py

# 모드 1 선택
# 시작 시간: 9:30, 종료 시간: 18:30
# 집중 모드 활성화: y
```

## 🔧 관리 명령어

### 자동 시작 관리
```bash
# 수동 시작
launchctl start com.focustimer.startup

# 수동 중지
launchctl stop com.focustimer.startup

# 상태 확인
launchctl list | grep focustimer
```

### 로그 확인
```bash
# 실행 로그
tail -f ~/Library/Logs/focus_timer.log

# 오류 로그
tail -f ~/Library/Logs/focus_timer_error.log
```

## 🛡️ 보안 기능

### 프로세스 보호
- 락 파일을 통한 중복 실행 방지
- 시그널 핸들러를 통한 안전한 종료 처리
- 상태 파일을 통한 설정 지속성

### 차단 강화
- hosts 파일 수정
- DNS 캐시 완전 초기화
- 브라우저 캐시 강제 초기화
- 브라우저 강제 재시작

## 📁 파일 구조

```
focus_timer/
├── focus_timer.py              # 메인 프로그램
├── install_focus_timer.sh      # 자동 시작 설치 스크립트
├── uninstall_focus_timer.sh    # 자동 시작 제거 스크립트
├── README.md                   # 사용법 설명서
└── hosts_backup               # hosts 파일 백업
```

### 상태 파일들
```
~/focus_timer_state              # 기본 상태
~/focus_timer_focus_state.json   # 집중 모드 상태
~/focus_timer.lock              # 프로세스 락 파일
~/hosts_backup                  # hosts 파일 백업
```

## ⚠️ 주의사항

1. **관리자 권한 필요**: hosts 파일 수정을 위해 sudo 권한이 필요합니다.
2. **브라우저 재시작**: 집중 모드 시작 시 모든 브라우저가 재시작됩니다.
3. **종료 방지**: 지정된 시간대에는 알고리즘 문제 해결 없이는 종료할 수 없습니다.
4. **백업 권장**: 중요한 작업 중에는 브라우저 탭을 백업해두세요.

## 🎯 사용 팁

### 효과적인 집중 모드 활용
1. **명확한 목표 설정**: 집중할 작업을 미리 정리
2. **브라우저 탭 정리**: 필요한 탭만 남기고 정리
3. **환경 최적화**: 방해 요소 제거
4. **단계적 접근**: 처음에는 짧은 시간부터 시작

### 문제 해결 시 주의사항
- **정확한 계산**: 계산기 사용 권장
- **시간 여유**: 문제 풀이에 충분한 시간 확보
- **집중력 유지**: 문제 풀이 중에도 집중력 유지

## 🔄 업데이트 내역

### v2.0 (현재)
- ✅ 알고리즘 문제 기반 종료 방지 시스템
- ✅ 브라우저 강제 재시작 기능
- ✅ 자동 시작 시스템
- ✅ 프로세스 보호 기능
- ✅ 상태 지속성 관리

### v1.0 (이전)
- ✅ YouTube 차단 기능
- ✅ 시간대별 차단
- ✅ 타이머 차단

## 📞 지원

문제가 발생하거나 개선 사항이 있으시면 이슈를 등록해주세요.

---

**💡 이 도구는 생산성 향상과 자기 통제력을 기르는 데 도움을 주기 위해 만들어졌습니다.**